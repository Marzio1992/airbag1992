<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Memorial Card Editor</title>

  <!-- Bootstrap CSS CDN -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.4.3/dist/css/bootstrap.min.css" rel="stylesheet" />

  <!-- Artistic font Dancing Script -->
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script&display=swap" rel="stylesheet" />

  <link rel="stylesheet" href="estilos.css" />
</head>
<body>

  <div class="page-container d-flex flex-column justify-content-center align-items-center min-vh-100 p-4">

    <h1 class="main-title mb-5 text-center">Memorial Card Editor</h1>

    <div class="content-wrapper d-flex flex-column flex-md-row align-items-center gap-5">

      <form class="formulario d-flex flex-column gap-4 p-4 shadow rounded">
        <input type="text" id="input-nombre" class="form-control" placeholder="Name of the Honoree" />
        <input type="text" id="input-fecha" class="form-control" placeholder="Date (e.g. 1945 - 2023)" />
        <input type="text" id="input-mensaje" class="form-control" placeholder="Special Message" />
        <input type="file" id="input-foto" class="form-control" />
        <button id="descargar-btn" class="btn btn-primary mt-3">Download Card as Image</button>
      </form>

      <div id="card" class="card p-4 shadow rounded">
        <img id="foto" src="" alt="Photo" />
        <div id="nombre" class="text-field"></div>
        <div id="fecha" class="text-field"></div>
        <div id="mensaje" class="text-field"></div>
      </div>

    </div>
  </div>

  <!-- functionality scripts -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

  <script>
    document.getElementById("input-nombre").addEventListener("input", (e) => {
      document.getElementById("nombre").innerText = e.target.value;
    });
    document.getElementById("input-fecha").addEventListener("input", (e) => {
      document.getElementById("fecha").innerText = e.target.value;
    });
    document.getElementById("input-mensaje").addEventListener("input", (e) => {
      document.getElementById("mensaje").innerText = e.target.value;
    });
    document.getElementById("input-foto").addEventListener("change", (e) => {
      const file = e.target.files[0];
      const reader = new FileReader();
      reader.onload = function (evt) {
        document.getElementById("foto").src = evt.target.result;
      };
      reader.readAsDataURL(file);
    });

    document.getElementById("descargar-btn").addEventListener("click", (event) => {
      event.preventDefault(); // Prevent form submission
      html2canvas(document.getElementById("card")).then((canvas) => {
        const link = document.createElement("a");
        link.download = "memorial-card.png";
        link.href = canvas.toDataURL();
        link.click();
      });
    });
  </script>

</body>
</html>
